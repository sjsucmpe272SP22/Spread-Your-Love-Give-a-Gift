<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="row" *ngIf="showBillAdd">
    <div class="col-md-6 col-md-offset-3">
      <div class="panel panel-primary" id="grad1" >
        <div class="panel-heading"  style="background-color: transparent;border: transparent;"><strong>Billing Address</strong></div>
        <div class="panel-body">
            <div class=" col-md-4  col-md-offset-1 card card-hover" *ngFor="let add of addressList">
                
                <div class="card-body" >
                    <table class="table" id="grad1">
                        <tbody>
                          <tr><th>Door No</th><td>{{add.doorNo}}</td></tr>
                          <tr><th>Street</th><td>{{add.street}}</td></tr>
                          <tr><th>City</th><td>{{add.city}}</td></tr>
                          <tr><th>Pincode</th><td>{{add.pincode}}</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer">
                    <button class="btn btn-success" (click)="selectadd(add)">select</button>
                </div>
              </div>
        </div>
      </div>
    </div>
  </div>
<div class="row">
    <div class="col-md-6 col-md-offset-3">
      <div class="panel panel-primary" id="grad1" >
        <div class="panel-heading text-center"  style="background-color: transparent;border: transparent;"><strong>Payment Summary</strong></div>
          <div class="panel-body" style="color:white">
              <b style="float: left;">Number of iems:</b><p style="float:right;" *ngIf="itemList">{{itemList.length}}</p><hr>
              <b style="float: left;">Total Price:</b><p style="float:right;" *ngIf="sum">{{sum|currency:'INR':true}}</p>
          </div>
      </div>
    </div>
</div>
<div class="row">
    <div class="col-md-6 col-md-offset-3">
      <div class="panel panel-primary" id="grad1" >
        <div class="panel-heading text-center"  style="background-color: transparent;border: transparent;"><strong>Payment</strong></div>
        <div class="panel-body">
            <div class="row" *ngIf="!showBillAdd && selectedAddObj">
                <div class="col-md-4">
                  <table class="table">
                    <caption>Shipping Address</caption>
                      <tbody>
                          <tr><th>Door No</th><td>{{selectedAddObj.doorNo}}</td></tr>
                          <tr><th>Street</th><td>{{selectedAddObj.street}}</td></tr>
                          <tr><th>City</th><td>{{selectedAddObj.city}}</td></tr>
                          <tr><th>Pincode</th><td>{{selectedAddObj.pincode}}</td></tr>
                      </tbody>
                      <tfoot>
                        <th><button class="btn btn-warning btn-xs" (click)="showBillAdd=true">Change Address</button></th>
                      </tfoot>
                  </table>
                </div>
              </div>
              <div class="form-group" >
                  <p *ngIf="itemList"><label>Total amount to be paid:</label><mark>{{sum|currency:'INR':true}}</mark></p>
                <button class="btn btn-success btn-sm" style="border:none" (click)="selPymt('cod')" >COD:Cash On Delivery<span class="glyphicon glyphicon glyphicon-ok-circle" *ngIf="codSelected"></span></button>&nbsp;
                <button class="btn btn-success btn-sm" style="border:none"  (click)="selPymt('card')" >Card Payment<span class="glyphicon glyphicon glyphicon-ok-circle" *ngIf="cardSelected"></span></button>
              </div>
            
            <form [formGroup]="checkoutForm" *ngIf="cardSelected">
              
            <label for="fname">Accepted Cards</label>
            <div class="icon-container">
              <i class="fa fa-cc-visa" style="color:navy;"></i>
              <i class="fa fa-cc-amex" style="color:blue;"></i>
              <i class="fa fa-cc-mastercard" style="color:red;"></i>
              <i class="fa fa-cc-discover" style="color:orange;"></i>
            </div>
            
              <div class="input-group form-group">
                <span class="input-group-addon" style="color:brown"><i class="glyphicon glyphicon-credit-card"></i></span>
                <input type="number" class="form-control input-lg" formControlName="cardnumber" placeholder="Enter 16 digits card number" autofocus>
              </div>
              <span class="text-danger" *ngIf="checkoutForm.get('cardnumber').invalid && checkoutForm.get('cardnumber').dirty">
                Please enter a valid card number.
              </span>
              <div class="input-group form-group">
                  <label >CVV:</label>
                  <input type="password" class="form-control input-lg" formControlName="cvv" placeholder="CVV" >
                  
              </div>
              <span class="text-danger" *ngIf="checkoutForm.get('cvv').invalid && checkoutForm.get('cvv').dirty">
                  Please enter a valid cvv number.
              </span>
              <div class="form-group">
                <label>Expiry Date:</label>
                <div class="row">
                  <div class="col-md-3">
                    <select name='expireMM' id='expireMM' formControlName="month" class="form-control">
                        <option value=''>--MM--</option>
                        <option value='01'>January</option>
                        <option value='02'>February</option>
                        <option value='03'>March</option>
                        <option value='04'>April</option>
                        <option value='05'>May</option>
                        <option value='06'>June</option>
                        <option value='07'>July</option>
                        <option value='08'>August</option>
                        <option value='09'>September</option>
                        <option value='10'>October</option>
                        <option value='11'>November</option>
                        <option value='12'>December</option>
                    </select>
                    <span class="text-danger" *ngIf="checkoutForm.get('month').invalid && checkoutForm.get('month').dirty">
                        Please select month.
                      </span>
                  </div>
                  <div class="col-md-3">
                    <select name='expireYY' id='expireYY' formControlName="year" class="form-control">
                        <option value="">--YYYY--</option>
                        <option [value]='number' *ngFor="let number of [2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030]">{{number}}</option>
                    </select> 
                    <span class="text-danger" *ngIf="checkoutForm.get('year').invalid && checkoutForm.get('year').dirty">
                        Please select year.
                      </span>
                  </div>
                  </div>
              </div>
              <div class="form-group" >
                  <p><button type="button" [ngClass]="{'btn btn-primary':true,'button':true}" [disabled]="checkoutForm.invalid || !selectedAddObj" (click)="buy(selectedAddObj)"><span>Buy and Place the order</span></button>
              </div>
            </form>
            <button  type="button" [ngClass]="{'btn btn-primary':true,'button':true}" [disabled]="!selectedAddObj" (click)="buyCod()" *ngIf="codSelected"><span>Buy And Place Order</span></button>
            <div class="loader" *ngIf="placebar" style="width:20px;height:20px;"></div>
            <div *ngIf="placed"><h6 class="alert alert-success">{{placed}}</h6></div>
            <div *ngIf="errmsg"><h6 class="alert alert-danger">{{errmsg}}</h6></div>
        </div>
      </div>
    </div>
  </div>


